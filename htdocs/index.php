<!DOCTYPE HTML>
<html>
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>iSLR</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="" />
	<meta name="keywords" content="" />
	<meta name="author" content="" />


	<link href="https://fonts.googleapis.com/css?family=Rubik:300,400,500,700,900" rel="stylesheet">
	
	<!-- Animate.css -->
	<link rel="stylesheet" href="css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="css/icomoon.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="css/bootstrap.css">

	<!-- Magnific Popup -->
	<link rel="stylesheet" href="css/magnific-popup.css">

	<!-- Flexslider  -->
	<link rel="stylesheet" href="css/flexslider.css">


	<!-- Theme style  -->
	<link rel="stylesheet" href="css/style.css">

	<!-- Modernizr JS -->
	<script src="js/modernizr-2.6.2.min.js"></script>	
   

	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="js/respond.min.js"></script>
	<![endif]-->
	<style>
        .scrollbar {
                
                height: 200px;
                width: 100%;
                overflow-y: scroll;
                overflow-x: hidden;
             }
             
         .box {

             width: 75%;
             margin: auto;
             
             
             padding: 5px 5px 15px 5px;
             border: 2px solid rgba(255, 255, 255, 0.2);
             /*background-color: #f1f1f1;*/
/*             background-color: #000;*/
             color: #d3d3d3;
         }    
        .box h3{
            color: white;
        }
        .wrapper {
            padding: 50px 10px;
        }
        .colorlib-search .search-wrap-2 {
            border-radius: 10px;
        }

    </style>

	</head>
	<body>
		
	<div class="colorlib-loader"></div>

	<div id="page">
		<nav class="colorlib-nav" role="navigation">
			<div class="top-menu">
				<div class="container">
					<div class="row">
						<div class="col-md-2">
							<div id="colorlib-logo"><img src=images/innopolis-logo.png  width="300" height="62"></div>
						</div>
						<div class="col-md-10 text-right menu-1">
							<ul>
								<li class="active"><a href="index.php">Home</a></li>
								<li><a href="contact.html">Contact</a></li>
                                <li class="btn-cta"><a href="#search"><span>Get started</span></a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</nav>
		<aside id="colorlib-hero">
			<div class="flexslider">
				<ul class="slides">
			   	<li style="background-image: url(images/img_bg_1.jpg);">
			   		<div class="overlay"></div>
			   		<div class="container-fluid">
			   			<div class="row">
				   			<div class="col-md-8 col-sm-12 col-md-offset-2 col-xs-12 col-md-pull-1 slider-text">
				   				<div class="slider-text-inner">
				   					<div class="desc">
				   						<h2>You only have to know one thing</h2>
					   					<h1>Best Tool for Performing Systematic Literature Reviews</h1>
					   					<p><a href="#search" class="btn btn-primary btn-lg"><span class="icon"><i class="icon-play3"></i></span> Start Search Now!</a></p>
				   					</div>
				   				</div>
				   			</div>
				   		</div>
			   		</div>
			   	</li>
			   	<li style="background-image: url(images/img_bg_5.jpg);">
			   		<div class="overlay"></div>
			   		<div class="container-fluid">
			   			<div class="row">
				   			<div class="col-md-8 col-sm-12 col-md-offset-2 col-xs-12 col-md-pull-1 slider-text">
				   				<div class="slider-text-inner">
				   					<div class="desc">
				   						<h2>You only have to know one thing</h2>
					   					<h1>Search With Most Popular Sources</h1>
					   					<p><a href="#search" class="btn btn-primary btn-lg "><span class="icon"><i class="icon-play3"></i></span> Start Search Now!</a></p>
					   				</div>
				   				</div>
				   			</div>
				   		</div>
			   		</div>
			   	</li>
			   	<li style="background-image: url(images/img_bg_3.jpg);">
			   		<div class="overlay"></div>
			   		<div class="container-fluid">
			   			<div class="row">
				   			<div class="col-md-8 col-sm-12 col-md-offset-2 col-xs-12 col-md-pull-1 slider-text">
				   				<div class="slider-text-inner">
				   					<div class="desc">
				   						<h2>You only have to know one thing</h2>
					   					<h1>Education is a Key to Success</h1>
					   					<p><a href="#search" class="btn btn-primary btn-lg"><span class="icon"><i class="icon-play3"></i></span> Start Search Now!</a></p>
					   				</div>
				   				</div>
				   			</div>
				   		</div>
			   		</div>
			   	</li>
			   	<li style="background-image: url(images/img_bg_4.jpg);">
			   		<div class="overlay"></div>
			   		<div class="container-fluid">
			   			<div class="row">
				   			<div class="col-md-8 col-sm-12 col-md-offset-2 col-xs-12 col-md-pull-1 slider-text">
				   				<div class="slider-text-inner">
				   					<div class="desc">
				   						<h2>You only have to know one thing</h2>
					   					<h1>Fastest Search Ever</h1>
					   					<p><a href="#search" class="btn btn-primary btn-lg"><span class="icon"><i class="icon-play3"></i></span> Start Search Now!</a></p>
					   				</div>
				   				</div>
				   			</div>
				   		</div>
			   		</div>
			   	</li>	
			  	</ul>
		  	</div>
		</aside>
        
		<div class="colorlib-search">
			<div class="container">
				<div class="row">
				<section id='search'>        
					<div class="col-md-10 search-wrap">
						<div class="search-wrap-2">
							<form method="post" class="colorlib-form">
			              	<div class="row">
			                <div class="col-md-10">
			                  <div class="form-group">
			                    <!-- <label for="search">Search Course</label> -->
			                    <div class="form-field">
			                    
            
<!--			                   <section id='directserach'>   -->
                               <input type="text" class="form-control" placeholder="Keyword search" name="phrase">
<!--                                    </section>-->
                                
			                    </div>
                                  
			                  </div>
			                </div>
			                
			                <div class="col-md-2">
			                  <input type="submit" name="search" id="submit" value="Search" class="btn btn-primary btn-block">
			                </div>
			              </div>
			              </form>
		            </div>
					</div>
                    </section>
				</div>
			</div>
        </div>
        
                      <style>
			              <?php
                          include 'css/style.css';
//                           phpinfo();
                          ?>
                      </style>
                        <?php
                        ini_set('display_errors',1);
                        // error_reporting(E_ALL);
                        ini_set('max_execution_time', 10000);
                        error_reporting(E_ALL ^ E_NOTICE); 
                        error_reporting(E_ERROR | E_PARSE);
                        ob_flush();
                        ob_clean();
                        
                    
                        # gets words and their synonyms returns appropriate mysql query 
                    
                        function form_query($matrix)
                        {
                            $query = "SELECT doi, title, author, publication, abstract
                                      FROM papers
                                      WHERE ";
                            
                            $title_part = "(";
                            $abstract_part = "(";
                            $n = count($matrix);
                            
                            for($i = 0; $i < $n; $i++) 
                            {
                                $title_part = $title_part."(";
                                $abstract_part = $abstract_part."(";
                                $m = count($matrix[$i]);
                                
                                for($j = 0; $j < $m; $j++)
                                {
                                    $title_part = $title_part."title LIKE '%".$matrix[$i][$j]."%'";
                                    $abstract_part = $abstract_part."abstract LIKE '%".$matrix[$i][$j]."%'";
                                    
                                    if($j < $m - 1)
                                    {
                                        $title_part = $title_part." OR "; 
                                        $abstract_part = $abstract_part." OR ";
                                    }
                                }
                                
                                $title_part = $title_part.")";
                                $abstract_part = $abstract_part.")";
                                
                                if($i < $n - 1)
                                {
                                    $title_part = $title_part." AND ";
                                    $abstract_part = $abstract_part ." AND ";
                                }
                            }
                            
                            $title_part = $title_part . ")";
                            $abstract_part = $abstract_part.")";
                            
                            return $query.$title_part." OR ".$abstract_part;
                        }
                    
                        
                        $doi_list = array();
                        $title_list = array();
                        $author_list = array();
                        $publication_list = array();
                        $abstract_list = array();

                        # gets matrix with synonyms array, obtains articles from the data base

                        function Search($matrix)
                        {   
                            $con=new mysqli("127.0.0.1","root","conass", "islr");
                            
                            $query = form_query($matrix);
                            
                            $res = mysqli_query($con, $query);
                                
                            if($res)
                            {
                                while($row = mysqli_fetch_array($res))
                                {       
                                    array_push($GLOBALS['doi_list'], $row[0]); 
                                    array_push($GLOBALS['title_list'], $row[1]);
                                    array_push($GLOBALS['author_list'], $row[2]);
                                    array_push($GLOBALS['publication_list'], $row[3]);
                                    array_push($GLOBALS['abstract_list'], $row[4]);
                                }
                            }
                        }

                    
                        # separate the keywords based on syntax rules, function returns array of strings
                        
                        function separate($keywords)
                        {
                            $keyword = '';
                            $array = array();
                            $n = strlen($keywords);
                            $i = 0;

                            while($i < $n)
                            {
                                if($keywords[$i] == ' ')  # separator, not important for query
                                {
                                    $i++;
                                    continue;
                                }

                                # next keyword is located between indices i and j
                                $j = $i;
                                while($j < $n)
                                {
                                    if($keywords[$j] == '"')  # by syntax rules this sign merges more keywords into one 
                                    {
                                        if($i != $j)  # end of the group of keywords
                                        {
                                            $j++;
                                            break;
                                        }
                                        else 
                                        {
                                            # don't include it in keyword
                                            $j++;
                                            continue;
                                        }
                                    }
                                    else if($keywords[$j] == ' ')  
                                    {
                                        # if there is no syntax for merged keywords this is the end of keyword
                                        if($keywords[$i] != '"') break;
                                    }
                                    $keyword .= $keywords[$j];
                                    $j++;
                                }

                                # push the keyword to array and make it suitable for next iteration
                                array_push($array, $keyword);
                                $keyword = "";
                                $i = $j;

                            }
                            
                            return $array;
                        }
                        
                    
                        # store individual article into data base
                        function store($doi, $title, $author, $publication, $abstract)
                        {
                            $con=new mysqli("127.0.0.1","root","conass", "islr");
                            $query = "INSERT INTO papers
                                      VALUES ('$doi', '$title', '$author', '$publication', '$abstract')";   
                            $con->query($query);
                        }
                    
                    
                        # makes request and stores results in the data base 
                        function XploreAPI($query)
                        {
                            $url = "http://ieeexploreapi.ieee.org/api/v1/search/articles?apikey=456f9m7nsgtr8vdrs8aapyxx&format=json&max_records=25&start_record=1&sort_order=asc&sort_field=publication_title&article_title=" .$query. "&abstract=" .$query;
                            
                            $ch = curl_init();
                            curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
                            curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
                            curl_setopt($ch, CURLOPT_URL, $url);
                            $result = curl_exec($ch);
                            curl_close($ch);

                            $obj = json_decode($result);
                            $n = $obj->total_records;
                            
                            # find all articles
                            for($i = 0; $i < $n; $i++)
                            {
                                $title = $obj->articles[$i]->title;
                                $author = $obj->articles[$i]->authors->authors[0]->full_name;
                                $conference = $obj->articles[$i]->publication_title;
                                $abstract = $obj->articles[$i]->abstract;
                                $doi = $obj->articles[$i]->doi;
                                # echo($title." <br> ".$author." <br> ".$conference." <br> ".$abstract." <br> ".$doi." <br> <br> ");
                                store($doi, $title, $author, $conference, $abstract);
                            }
                        }
                        
                    
                        function SpringerAPI($query)
                        {
                            $url = "http://api.springer.com/metadata/json?api_key=ac2cc2740c58bf970ca18f82fc874f69&q=" . $query. "&s=1&p=25";
                            
                            $ch = curl_init();
                            curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
                            curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
                            curl_setopt($ch, CURLOPT_URL, $url);
                            $result = curl_exec($ch);
                            curl_close($ch);

                            $obj = json_decode($result);
                            
                            $n = $obj->result[0]->recordsDisplayed;
                            
                            for($i = 0; $i < $n; $i++)
                            {
                                $title = $obj->records[$i]->title;
                                $author = $obj->records[$i]->creators[0]->creator;
                                $publication = $obj->records[$i]->publicationName;
                                $abstract = $obj->records[$i]->abstract;
                                $doi = $obj->records[$i]->doi;
                                # echo($title." <br> ".$author." <br> ".$publication." <br> ".$abstract." <br> ".$doi." <br> <br> ");
                                store($doi, $title, $author, $publication, $abstract);
                            }
                        }
                    
                        
                        function ACM($query)
                        {
                             $url = "https://dl.acm.org/exportformats_search.cfm?query=".$query."&filtered=&within=owners%2Eowner%3DHOSTED&dte=&bfr=&srt=%5Fscore&expformat=endnote";
                            
                            $curl = curl_init($url);
                            curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
                            curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
                            curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0);
                            curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 0);
                            $data = curl_exec($curl);
                            curl_close($curl);
                            
                            $n = strlen($data); 
                            $title = "";
                            $author = "";
                            $publication = "";
                            $doi = "";
                            $i = 0;
                            $articles = -1;
                            
                            while($i < $n and $articles <= 25)
                            {
                                $temp = "";
                                $j = $i;
                                while($j < $n)
                                {
                                    $temp = $temp . $data[$j];
                                    $j = $j + 1;
                                    if($data[$j] == '%') break;
                                }
                                $i = $j;
                                
                                if($temp[1] == '0')  # store article in the db and reset 
                                {
                                    if($title != "")
                                    {    
                                        store($doi, $title, $author, $publication, "");
                                    }
                                    $title = "";
                                    $author = "";
                                    $publication = "";
                                    $doi = "";
                                    $articles += 1;
                                }
                                else if($temp[1] == 'T')  # temp contains title
                                {
                                    $title = $temp;
                                    $title = str_replace("%T", "", $title);
                                }
                                else if($temp[1] == 'A' and $author == "")  # author name in temp
                                {
                                    $author = $temp;
                                    $author = str_replace("%A", "", $author);
                                }
                                else if($temp[1] == 'B')  # conference 
                                {
                                    $publication = $temp;
                                    $publication = str_replace("%B", "", $publication);
                                }
                                else if($temp[1] == 'R')  # doi
                                {
                                    $doi = $temp;
                                    $doi = str_replace("%R", "", $doi);
                                }
                            }
                        }
                    
                    
                        function split_keywords($array)
                        {
                            $n = count($array);
                            $answer = "";
                            for($i = 0; $i < $n; $i++)
                            {
                                $tmp = str_replace(' ', '+', $array[$i], $count[$array[$i]]);
                                $tmp = str_replace('@', '', $tmp, $count[$tmp]);
                                $answer = $answer . $tmp;
                                if($i < $n - 1) $answer = $answer . "+";
                            }
                            return $answer;
                        }
                    
                    
                        # return query format reqiured in ACM Digital Library
                        
                        function ACM_split_keywords($array)
                        {
                            $n = count($array);
                            $answer = "";
                            for($i = 0; $i < $n; $i++)
                            {
                                $tmp = str_replace(' ', '+', $array[$i], $count[$array[$i]]);
                                $tmp = str_replace('@', '', $tmp, $count[$tmp]);
                                $answer = $answer . $tmp;
                                if($i < $n - 1) $answer = $answer . "%20";
                            }
                            return $answer;
                        }
                    
                        
                        function printTable($brother)
                        {
                            $out0 = $GLOBALS['title_list'];
                            $out1 = $GLOBALS['author_list'];
                            $out2 = $GLOBALS['publication_list'];
                            $out3 = $GLOBALS['doi_list'];
                            echo("<div class='container'><div class='row'>");
                            echo("<table>
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Title</th>
                                            <th>Author</th>
                                            <th>Publication</th>
                                            <th>doi</th>
                                        </tr>
                                    </thead>
                                  <tbody>");
                            
                            
                            $num = 1;
                            for($i = 0; $i < count($GLOBALS['doi_list']); $i++)
                            {
                                if($brother[$i] != -1) continue;
                                
                                echo("<tr>
                                        
                                        <td class="."text-left"."> $num. </td>
                                        <td class="."text-left"."> $out0[$i] </td>
                                        <td class="."text-left"."> $out1[$i] </td>
                                        <td class="."text-left"."> $out2[$i] </td>
                                        <td class="."text-left"."> $out3[$i] </td>
                                    </tr>");
                                
                                for($j = $i + 1; $j < count($GLOBALS['doi_list']); $j++)
                                {
                                    if($brother[$j] == $i) 
                                    {
                                        echo("<tr>
                                        
                                        <td class="."text-left"."> </td>
                                        <td class="."text-left"."> $out0[$j] </td>
                                        <td class="."text-left"."> $out1[$j] </td>
                                        <td class="."text-left"."> $out2[$j] </td>
                                        <td class="."text-left"."> $out3[$j] </td>
                                    </tr>");
                                    } 
                                }
                                
                                $num += 1;
                            }
                            
                             echo("</tbody>
                                </table></div></div>");
                            
                                
                            echo "<div class='row text-center'><div class='container'><button class = 'myButton' type='submit' name = 'reset' onclick = 'index.php'>";
                                echo "<i class = 'ion-refresh'> </i> Reset</button></div></div>";
                            
                        }
                    
                    
                        # returns array of synonyms from most to least significant
                    
                        function synonyms($word)
                        {   
                            // echo "i'm here";
                            $url = "https://api.datamuse.com/words?ml=".$word;
                            // $url = "google.com";
                            $curl = curl_init($url);
                            curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
                            curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
                            curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0);
                            curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 0);
                            $data = curl_exec($curl);
                            // echo "i'm here";
                            // echo $data;
                            // echo "after it";
                            curl_close($curl);
                            
                            $answer = array();
                            $i = 1;
                            $n = strlen($data) - 1;
                            
                            while($i < $n)
                            {
                                if($data[$i] != '{') 
                                {
                                    $i = $i + 1;
                                    continue;
                                }
                                
                                $i = $i + 1;
                                $word = "";
                                $flag = true;
                                
                                while($data[$i] != '}')
                                {
                                    if($data[$i] == ',') $flag = false;
                                    if($flag) $word = $word . $data[$i]; 
                                    $i = $i + 1;
                                }
                                
                                # get the exact word we are looking for, insert into $answer list
                                $temp = "";
                                for($j = 8; $j < strlen($word) - 1; $j++)
                                {
                                    $temp = $temp . $word[$j];
                                }
                                array_push($answer, $temp);
                            }
                            return $answer;
                        }

                    
                        function sort_synonyms()
                        {
                            echo "<div class = 'radio-button'>";
                            
                            echo "<h4> <b> Sort the synonyms by: </b> <br> <br> </h4>";
                            
                            echo "<p> <b>";
                            echo "<input type='radio' name='sort'
                            value='alphabetical'> alphabetical order <br>";
                            
                            echo "<input type='radio' name='sort'
                            value='relevance'> relevance meaning";
                            echo " </b> </p> <br>";
                            
                            echo "</div>";
                            
                            echo "<button class = 'button2' type='submit' name = 'continue'>";
                                echo "continue";
                            echo "</button>";
                        }
                    
                        
                        if(isset($_POST["continue"]))
                        {
                            $file = 'keywords.txt';
                            $handle = fopen($file, 'r');
                            $keywords = fread($handle,filesize($file));
                            
                            $sort_temp = false;
                            $array = separate($keywords);
                            
                            $sort = $_POST['sort'];
                            if($sort == "alphabetical") $sort_temp = true; 
                            
                            determine_synonyms($array, $sort_temp);
                        }
                    
                        
                        if(isset($_POST['refresh']) and isset($_POST['selectsort']))
                        {
                            $file = 'keywords.txt';
                            $handle = fopen($file, 'r');
                            $keywords = fread($handle,filesize($file));
                            
                            $array = separate($keywords);
                            determine_synonyms($array, $_POST['selectsort']);
                        }
                    
                    
                        function determine_synonyms($array, $sort_temp)
                        {
//                            echo "<script>alert(\"Вы вошли на сайт, как гость.\");</script>";
                            echo "<div class='row'>";
                            echo "<div class='formref col-md-12 text-center'><div class='head'><b> Choose the synonyms </b></div></div>";
                            
                            echo "<form id = 'selectForm' method = 'post'>";
                            echo "<div class='row text-center'><div class='container'><button name = 'refresh' class='myButton'> <i class = 'ion-refresh'> </i> Refresh </button></div></div>";
                            echo "<br>";
                            
                            echo "<div class='row text-center'><select name = 'selectsort'>";
                            echo "<option selected disabled text-center> Sort synonyms by </option>";
                            echo "<option value = 0> relevance meaning </option>";
                            echo "<option value = 1> alphabetical order </option>";
                            echo "</select></div>";

                            echo "</form></div>"; 
                            
                            $n = count($array);
                    
                            echo "<div class='table'><div class='container'><div class='col-md-10 search-wrap'><div class='boxes'>";
                            echo "<form action = 'index.php' method = 'post'>";

                            for($i = 0; $i < $n; $i++)
                            {
                                echo "<div class = 'box'>";
                                echo "<div class='word'>$array[$i]</div><br>";
                                $temp = synonyms($array[$i]);
                                
                                if($sort_temp) sort($temp);  # sort by relevance or alphabetically
                                
                                $m = count($temp);
                                echo "<div class = 'scrollbar text-center'>";
                                for($j = 0; $j < $m; $j++)
                                {
                                    echo "<label class='customcheck'>$temp[$j]<input type = 'checkbox' name = 'include[]' value = '$temp[$j]'/><span class='checkmark'></span>
        </label>";
//                                    echo "<br> <br>";
                                }
                                echo "</div>";
                                echo "</div>";
                                echo "<br>";
                            }
                            
//                            echo "<div class='row'>";
                            echo "<div class='row text-center'><div class='done'><button class = 'myButton' type='submit' name = 'done'>";
                                echo "<i class = 'ion-android-done-all'> </i> Done";
                            echo "</button></div></div>";
                            echo "</form>";
                            
                            echo "</div></div></div></div>";
                        }
                            
                    
                        # sintax rules:
                        # using " " to merge more keywords into one 

                        if(isset($_POST["search"])) {
                 
                            echo "<br>";
                            
                            $keywords = $_POST["phrase"];
                             
                            # write entered keywords to the file 
                            $file = 'keywords.txt';
                            $handle = fopen($file, 'w') or die('Cannot open file');
                            fwrite($handle, $keywords);
                            
                            // sort_synonyms();
                            $array = separate($keywords);
                            
                            determine_synonyms($array, 0);
                        }
                
                        
                        function separate_synonyms($array, $temp)
                        {
                            $synonym = array(); # for each entered keyword, this 2d array will contain their synonyms
                            $n = count($array);
                            $m = count($temp);
                            $j = 0;
                            
                            # separate synonyms of keywords into groups(2d array) 
                            for($i = 0; $i < $n; $i++)
                            {
                                $current = array();
                                array_push($current, $array[$i]);
                                $syn = synonyms($array[$i]);
                                
                                while($j < $m)
                                {
                                    if(array_search($temp[$j], $syn) != NULL)
                                    {
                                        array_push($current, $temp[$j]);
                                    }
                                    else break; # make cut when synonym doesn't belong to group 
                                    $j++;
                                }
                                
                                array_push($synonym, $current);  # pushing group into matrix 
                            }
                            
                            return $synonym;
                        }
                    
                    
                        function isAlpha($c)
                        {
                            if($c >= 'a' and $c <= 'z') return true;
                            if($c >= 'A' and $c <= 'Z') return true;
                            return false;
                        }
                    
                    
                        function getWords($sentence)
                        {
                            $answer = "";
                            $n = strlen($sentence);
                            $i = 0;

                            while($i < $n)
                            {
                                if(!isAlpha($sentence[$i]))  # separator, not relevant
                                {
                                    $i++;
                                    continue;
                                }

                                # next word is located between indices i and j
                                $j = $i;
                                $word = "";
                                while($j < $n)
                                {
                                    if(!isAlpha($sentence[$j])) break;
                                    $word = $word . $sentence[$j];
                                    $j++;
                                }

                                $answer = $answer . $word;
                                $answer = $answer . " ";
                                $i = $j;

                            }
                            
                            return $answer;
                        }
                    

                        function LevenshteinDistance($a, $b)
                        {
                            $n = count($a);
                            $m = count($b);
                            
                            // init
                            $dp = array(array());
                            $empty_array = array();
                            for($j = 0; $j <= $m; $j++) array_push($empty_array, 0);
                            for($i = 0; $i <= $n; $i++)
                            {
                                array_push($dp, $empty_array);
                            }
                            
                            // main part of algorithm
                            for($i = 0; $i <= $n; $i++)
                            {
                                for($j = 0; $j <= $m; $j++)
                                {
                                    if($i == 0) $dp[$i][$j] = $j;
                                    else if($j == 0) $dp[$i][$j] = $i;
                                    else if($a[$i - 1] == $b[$j - 1]) $dp[$i][$j] = $dp[$i - 1][$j - 1];
                                    else $dp[$i][$j] = 1 + min($dp[$i - 1][$j - 1], min($dp[$i - 1][$j], $dp[$i][$j - 1])); // costs of replace, remove and insert
                                }
                            }
                            return $dp[$n][$m];
                        }
                    
                    
                        function areSimilar($a, $b)
                        {
                            // if we need to change less than half of words we will consider two arcticles as similar
                            $edit = LevenshteinDistance($a, $b);
                            if($edit <= count($a) / 2) return 1;
                            
                            $edit_reverse = LevenshteinDistance($b, $a);
                            if($edit_reverse <= count($b) / 2) return 1;
                            return 0;
                        }
                    
                    
                        function similarContent($a, $b)
                        {
                            /*
                                                Using API
                            
                            $url = "https://api.dandelion.eu/datatxt/sim/v1/?text1=".getWords($a)."&text2=".getWords($b)."&token=d60e49c441b942b991b17bd949e6fe7c";
                            
                            $ch = curl_init();
                            curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
                            curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
                            curl_setopt($ch, CURLOPT_URL, $url);
                            $result = curl_exec($ch);
                            curl_close($ch);

                            $obj = json_decode($result);
                            
                            if($obj->similarity >= 0.75) return true;
                            return false;
                            */
                            
                            $a = getWordsAsArray($a);
                            $b = getWordsAsArray($b);
                            return areSimilar($a, $b); 
                        }
                    
                    
                        function get_closest_synonyms($word)
                        {
                            $url = "https://api.datamuse.com/words?ml=".$word."&max=5";
                            $curl = curl_init($url);
                            curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
                            curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
                            curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0);
                            curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 0);
                            $data = curl_exec($curl);
                            curl_close($curl);
                            
                            $answer = array();
                            $i = 1;
                            $n = strlen($data) - 1;
                            
                            while($i < $n)
                            {
                                if($data[$i] != '{') 
                                {
                                    $i = $i + 1;
                                    continue;
                                }
                                
                                $i = $i + 1;
                                $word = "";
                                $flag = true;
                                
                                while($data[$i] != '}')
                                {
                                    if($data[$i] == ',') $flag = false;
                                    if($flag) $word = $word . $data[$i]; 
                                    $i = $i + 1;
                                }
                                
                                # get the exact word we are looking for, insert into $answer list
                                $temp = "";
                                for($j = 8; $j < strlen($word) - 1; $j++)
                                {
                                    $temp = $temp . $word[$j];
                                }
                                array_push($answer, $temp);
                            }
                            return $answer;
                        }
                    
                    
                        function getWordsAsArray($sentence)
                        {
                            $answer = array();
                            $n = strlen($sentence);
                            $i = 0;

                            while($i < $n)
                            {
                                if(!isAlpha($sentence[$i]))  # separator, not relevant
                                {
                                    $i++;
                                    continue;
                                }

                                # next word is located between indices i and j
                                $j = $i;
                                $word = "";
                                while($j < $n)
                                {
                                    if(!isAlpha($sentence[$j])) break;
                                    $word = $word . $sentence[$j];
                                    $j++;
                                }

                                array_push($answer, $word);
                                $i = $j;

                            }
                            
                            return $answer;
                        }
                    
                    
                        function initialize_progress_bar()
                        {
                            // echo "<div id='barbox_a'></div>";
                            echo "<div class='bar blank'></div>";
                        }
                    
                        
                        function progress_bar_update($percent)
                        {
                            echo "<div class='per'>{$percent}
                                %</div>\n";
                                
                            echo "<div class='bar' style='width:", 
                                $percent * 3,"px'></div>\n";

                            ob_flush();
                            flush();
                        }
                    
                        
                        function hide_progress_bar()
                        {
                            echo "<style>
                                
                                #text {
                
                                    visibility: hidden;
                                }

                                #barbox_a {
                              
                                    visibility: hidden;
                                }
            
                                .per {
                
                                    visibility: hidden;
                                }

                                .bar {
                                
                                    visibility: hidden;
                                }
                                
                                </style>";
                        }
                    
                        
                        # We want to consider two synonyms as same word while doing a similarity test (our similarity test will be more accurate)
                        
                        # As it's too slow to look for list of synonyms for first word, and then search for second word in the that list each 
                        # time while comparing two words of different titles 
                        
                        # I decided to create special titles only for similarity comparison, some words will be replaced 
                        # with their synonym which has been used before for composing special titles
                    
                        # Our goal here is not to have case where two synonyms appear in group of words
                        # that were used to compose those special titles
                    
                        function transform_for_comparison($array)
                        {
                            $answer = array();
                            $included_words = array();
                            $n = count($array);
                            //initialize_progress_bar();
                            
                            for($i = 0; $i < $n; $i++)  # iterate theough all the titles
                            {   
                                # calculate the percentage of finished progress and update the progress bar
                                
                                $percent = (($i + 1) / $n) * 100;
                                $percent = intval($percent);
                                //progress_bar_update($percent);
                                
                                $alternative = "";
                                $words = getWordsAsArray($array[$i]);
                                foreach($words as $word)  # now go through each word of title
                                {
                                    # try to find synonym of that word that has been used before
                                    
                                    $synonym_included = false;
                                    $cs = get_closest_synonyms($word);  # look only for few synonyms becouse of faster execution 
                                    
                                    foreach($cs as $temp)
                                    {
                                        # look if some of his synonyms has been already included in list, if no synonym found then insert the
                                        # current word in list
                                        
                                        if(array_search($temp, $included_words) != NULL)
                                        {
                                            $alternative = $alternative . $temp . " ";  # replace the word with its synonym in special title
                                            $synonym_included = true;
                                            break;
                                        }
                                    }
                                    
                                    if(!$synonym_included)
                                    {
                                        $alternative = $alternative . $word . " ";  # include that word in special title 
                                        
                                        if(array_search($word, $included_words) == NULL) array_push($included_words, $word);
                                    }
                                }
                                
                                # echo $array[$i]."<br>".$alternative."<br> <br>";
                                
                                array_push($answer, $alternative); # push the special title to the final answer 
                            }
                            
                            hide_progress_bar();
                            return $array;
                        }
                        
                        
                        function findSimilars()
                        {
                            $arr0 = $GLOBALS['title_list'];
                            $arr0 = transform_for_comparison($arr0);
                            $n = count($arr0);
                            
                            $brother = array();
                            for($i = 0; $i < $n; $i++) array_push($brother, -1);
                            
                            for($i = 0; $i < $n; $i++)
                            {
                                
                                if($brother[$i] != -1) continue;
                                
                                for($j = $i + 1; $j < $n; $j++)
                                {
                                    if(similarContent($arr0[$i], $arr0[$j]))
                                    {
                                        $brother[$j] = $i;
                                    }
                                }
                            }
                            
                            return $brother; # for each paper points first article with similar content 
                        }
                    
                    
                        # user have chosen synonyms he wants, continue process
                    
                        if(isset($_POST['done']))
                        {   
                
                            
                            $temp = array();
                            
                            if(isset($_POST['include']))
                            {
                                foreach($_POST['include'] as $value)
                                {
                                    array_push($temp, $value);  # synonyms chosen 
                                }
                            }
                    
                            # get entered keywords from file 
                            $file = 'keywords.txt';
                            $handle = fopen($file, 'r');
                            $keywords = fread($handle,filesize($file));
                            
                            $array = separate($keywords);
                            
                            $synonym = separate_synonyms($array, $temp); 
                            
                            # extend future queries with synonyms
                            
                            foreach($temp as $tmp) 
                            {
                                array_push($array, $tmp);
                            }
                            
                            $query = split_keywords($array);
                            
                            $ACMquery = ACM_split_keywords($array);
                            
                            XploreAPI($query);
                            
                            SpringerAPI($query);
                            
                            ACM($ACMquery);
                            
                            Search($synonym);
                            
                            printTable(findSimilars());
                            
                        }
                    
                    ?>
                      
                    
		<div id="colorlib-counter" class="colorlib-counters">
			<div class="container">
				<div class="col-md-7">
					<div class="about-desc">
						<div class="about-img-1 animate-box" style="background-image: url(images/about-img-2.jpg);"></div>
						<div class="about-img-2 animate-box" style="background-image: url(images/about-img-1.jpg);"></div>
					</div>
				</div>
				<div class="col-md-5">
					<div class="row">
						<div class="col-md-12 colorlib-heading animate-box">
							<h1 class="heading-big">Who are we</h1>
							<h2>Who are we</h2>
						</div>
					</div>
					<div class="row">
						<div class="col-md-12 animate-box">
							<p><strong>Even all powerful projects start with search</strong></p>
							<p>We present you a tool for systematic literature reviews</p>
						</div>
						<div class="col-md-6 col-sm-6 animate-box">
							<div class="counter-entry">
								<div class="desc">
									<span class="colorlib-counter js-counter" data-from="0" data-to="1539" data-speed="5000" data-refresh-interval="50"></span>
									<span class="colorlib-counter-label">Reviews</span>
								</div>
							</div>
						</div>
						<div class="col-md-6 col-sm-6 animate-box">
							<div class="counter-entry">
								<div class="desc">
									<span class="colorlib-counter js-counter" data-from="0" data-to="3653" data-speed="5000" data-refresh-interval="50"></span>
									<span class="colorlib-counter-label">Users</span>
								</div>
							</div>
						</div>
						<div class="col-md-6 col-sm-6 animate-box">
							<div class="counter-entry">
								<div class="desc">
									<span class="colorlib-counter js-counter" data-from="0" data-to="36547" data-speed="5000" data-refresh-interval="50"></span>
									<span class="colorlib-counter-label">Articles found</span>
								</div>
							</div>
						</div>
						<div class="col-md-6 col-sm-6 animate-box">
							<div class="counter-entry">
								<div class="desc">
									<span class="colorlib-counter js-counter" data-from="0" data-to="10" data-speed="5000" data-refresh-interval="50"></span>
									<span class="colorlib-counter-label">Resources</span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div id="colorlib-testimony" class="testimony-img" style="background-image: url(images/img_bg_2.jpg);" data-stellar-background-ratio="0.5">
			<div class="overlay"></div>
			<div class="container-fluid">
				<div class="row">
					<div class="col-md-12 center-heading text-center colorlib-heading animate-box">
						<h1 class="heading-big">What are the user say</h1>
						<h2>What are the user say</h2>
					</div>
				</div>
				<div class="row">
					<div class="col-md-12">
						<div class="testimony-flex">
							<div class="one-fifth animate-box">
								<span class="icon"><i class="icon-quotes-left"></i></span>
								<div class="testimony-wrap">
									<blockquote>
										<p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts.</p>
									</blockquote>
									<div class="desc">
										<div class="figure-img" style="background-image: url(images/person1.jpg);"></div>
										<h3>Dave Henderson</h3>
									</div>
								</div>
							</div>
							<div class="one-fifth animate-box">
								<span class="icon"><i class="icon-quotes-left"></i></span>
								<div class="testimony-wrap">
									<blockquote>
										<p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics.</p>
									</blockquote>
									<div class="desc">
										<div class="figure-img" style="background-image: url(images/person2.jpg);"></div>
										<h3>Dave Henderson</h3>
									</div>
								</div>
							</div>
							<div class="one-fifth animate-box">
								<span class="icon"><i class="icon-quotes-left"></i></span>
								<div class="testimony-wrap">
									<blockquote>
										<p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean.</p>
									</blockquote>
									<div class="desc">
										<div class="figure-img" style="background-image: url(images/person3.jpg);"></div>
										<h3>Dave Henderson</h3>
									</div>
								</div>
							</div>
							<div class="one-fifth animate-box">
								<span class="icon"><i class="icon-quotes-left"></i></span>
								<div class="testimony-wrap">
									<blockquote>
										<p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove</p>
									</blockquote>
									<div class="desc">
										<div class="figure-img" style="background-image: url(images/person1.jpg);"></div>
										<h3>Dave Henderson</h3>
									</div>
								</div>
							</div>
							<div class="one-fifth animate-box">
								<span class="icon"><i class="icon-quotes-left"></i></span>
								<div class="testimony-wrap">
									<blockquote>
										<p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics.</p>
									</blockquote>
									<div class="desc">
										<div class="figure-img" style="background-image: url(images/person1.jpg);"></div>
										<h3>Dave Henderson</h3>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>




		<!-- <div class="colorlib-blog colorlib-light-grey">
			<div class="container">
				<div class="row">
					<div class="col-md-8 col-md-offset-2 text-center colorlib-heading animate-box">
						<h2>Recent News</h2>
						<p>Even the all-powerful Pointing has no control about the blind texts it is an almost unorthographic life One day however a small line of blind text by the name</p>
					</div>
				</div>
				<div class="row">
					<div class="col-md-6 animate-box">
						<article class="article-entry">
							<a href="blog.html" class="blog-img" style="background-image: url(images/blog-1.jpg);">
								<p class="meta"><span class="day">18</span><span class="month">Apr</span></p>
							</a>
							<div class="desc">
								<h2><a href="blog.html">Creating Mobile Apps</a></h2>
								<p class="admin"><span>Posted by:</span> <span>James Smith</span></p>
								<p>Even the all-powerful Pointing has no control about the blind texts it is an almost unorthographic life. The Big Oxmox advised her not to do so, because there were thousands of bad Commas, wild Question Marks and devious Semikoli, but the Little Blind Text didn’t listen. She packed her seven versalia, put her initial into the belt and made herself on the way.</p>
							</div>
						</article>
					</div>
					<div class="col-md-6">
						<div class="f-blog animate-box">
							<a href="blog.html" class="blog-img" style="background-image: url(images/blog-1.jpg);">
							</a>
							<div class="desc">
								<h2><a href="blog.html">How to Create Website in Scratch</a></h2>
								<p class="admin"><span>04 March 2018</span></p>
								<p>Even the all-powerful Pointing has no control about the blind texts it is an almost unorthographic life</p>
							</div>
						</div>
						<div class="f-blog animate-box">
							<a href="blog.html" class="blog-img" style="background-image: url(images/blog-2.jpg);">
							</a>
							<div class="desc">
								<h2><a href="blog.html">How to Convert PSD File to HTML File?</a></h2>
								<p class="admin"><span>04 March 2018</span></p>
								<p>Even the all-powerful Pointing has no control about the blind texts it is an almost unorthographic life</p>
							</div>
						</div>
						<div class="f-blog animate-box">
							<a href="blog.html" class="blog-img" style="background-image: url(images/blog-3.jpg);">
							</a>
							<div class="desc">
								<h2><a href="blog.html">How to Build Games App in Mobile</a></h2>
								<p class="admin"><span>04 March 2018</span></p>
								<p>Even the all-powerful Pointing has no control about the blind texts it is an almost unorthographic life</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div> -->

	
		<div id="colorlib-subscribe" class="subs-img" style="background-image: url(images/img_bg_2.jpg);" data-stellar-background-ratio="0.5">
			<div class="overlay"></div>
			<div class="container">
				<div class="row">
					<div class="col-md-8 col-md-offset-2 text-center colorlib-heading animate-box">
						<h2>Subscribe Newsletter</h2>
						<p>Subscribe our newsletter and get latest update</p>
					</div>
				</div>
				<div class="row animate-box">
					<div class="col-md-6 col-md-offset-3">
						<div class="row">
							<div class="col-md-12">
							<form class="form-inline qbstp-header-subscribe">
								<div class="col-three-forth">
									<div class="form-group">
										<input type="text" class="form-control" id="email" placeholder="Enter your email">
									</div>
								</div>
								<div class="col-one-third">
									<div class="form-group">
										<button type="submit" class="btn btn-primary">Subscribe Now</button>
									</div>
								</div>
							</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<footer id="colorlib-footer">
			<div class="copy">
				<div class="container">
					<div class="row">
						<div class="col-md-12 text-center">
							<p>
								<small class="block">&copy; <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved <a href="https://colorlib.com" target="_blank">Colorlib</a>
<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></small><br> 
							</p>
						</div>
					</div>
				</div>
			</div>
		</footer>
	</div>

	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="icon-arrow-up2"></i></a>
	</div>
	
	<!-- jQuery -->
	<script src="js/jquery.min.js"></script>
	<!-- jQuery Easing -->
	<script src="js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="js/bootstrap.min.js"></script>
	<!-- Waypoints -->
	<script src="js/jquery.waypoints.min.js"></script>
	<!-- Stellar Parallax -->
	<script src="js/jquery.stellar.min.js"></script>
	<!-- Flexslider -->
	<script src="js/jquery.flexslider-min.js"></script>
	<!-- Owl carousel -->
	<script src="js/owl.carousel.min.js"></script>
	<!-- Magnific Popup -->
	<script src="js/jquery.magnific-popup.min.js"></script>
	<script src="js/magnific-popup-options.js"></script>
	<!-- Counters -->
	<script src="js/jquery.countTo.js"></script>
	<!-- Main -->
	<script src="js/main.js"></script>
	<script>
$(function(){
    $('a[href*=#]').click(function() {
    if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
        && location.hostname == this.hostname) {
            var $target = $(this.hash);
            $target = $target.length && $target || $('[name=' + this.hash.slice(1) +']');
            if ($target.length) {
                var targetOffset = $target.offset().top;
                $('html,body').animate({scrollTop: targetOffset}, 500);//скорость прокрутки
                return false;
            }
        }
    });
});
</script>
	
	</body>
</html>

